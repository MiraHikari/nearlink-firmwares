# nearlink-firmwares指南

## 我们的海思论坛文章，欢迎支持
[链接点我](https://developers.hisilicon.com/postDetail?tid=0206166650494929002)

## 我们的B站推流视频，欢迎支持
[链接点我](https://www.bilibili.com/video/BV1YmmxYXEd3)
[第二部，敬请期待]()

## 介绍

星闪固件管理，是一款基于**Tauri + Rust**制作的整合了：串口功能、串口烧写、固件商店分发下载管理的，一款服务于**星闪用户和开发者之间联系**的管理工具软件。为解决用户间使用开发者开源的星闪项目时，需要耗时于编译配置后才能使用到通用固件，而开发者又无法及时更新固件的问题，我们开创的提出：*开发者只需要上传自己的项目固件，剩下的交给用户在我们这软件内，下载，烧写，重启开发板，一站式服务搞定所有操作*。

## 项目背景

星闪是中国原生的新一代近场距离无线连接通信解决方案，旨在为通信方面提供国产化解决方案。星闪已于2022年11月发布1.0标准以来，在2023年9月推出推向民用终端设备。发布时间已有一年有余，市面上的面向开发者设备也有十几款售卖。*但目前针对开发者的通用性固件，缺少宣传与更好的集中分享平台*，**而更多开发者决定分享的则是以“SDK与Demo项目一同开源”，缺少了对普通用户们的操作理解上的偏袒**。
因此我们决定，为了让星闪这一项技术，能够更多人**愿意使用进来，愿意低时间成本使用，愿意支持认可背后默默无闻的开发者们的星闪开发的努力**，我们决定做出这一份软件，照顾普通用户无法投入时间配置开发环境、开发者无法及时在社交论坛平台更新上传自己的固件更新下发给普通用户们的痛点。在这上面上传的每一份固件，都是经过了开发者的*允许认可*后，由我们对每一位开发者的Git推送上的固件、介绍、信息审核后，打包至**Github主仓库、Gitee镜像仓库、浩瀚银河福州电信机房冷备仓库、浩瀚银河福州联通机房镜像仓库、国内123网盘镜像仓库**，照顾部分国内用户访问Github不佳状况，镜像仓库对每一次提交会自动同步，方便用户访问使用。通过软件刷新页面，即可让普通用户下载固件按作者提供的README、PDF说明教程等文件使用。**一站式服务普通用户与开发者**。
该项目为爱发电，并保持更新、维护固件商店生态发展，对国内机房的数据存储会做到**99.9%可用性**、**配备UPS电源**，努力做最棒的固件分享平台。

## 软件功能

- ✅固件商店页面，用于*开发者上传固件至主页面，引导用户下载使用*。
- ✅固件下载，用于*用户下载固件至本地*。
- ✅固件管理，用于*用户对下载内容进行管理、删除、重命名、本地导入*。
- ✅固件收藏，用于*用户对商店的固件可以收藏，使用期间可以直接在收藏页面*。
- ✅串口烧写、设置内的烧写设置，可支持**一键烧写**，支持**海思烧写模式**和**第三方工具烧写模式**，用于*用户对下载的固件，直接在软件内，进行烧写至开发板*。
- ✅串口管理、串口调试，用于*用户对开发板进行串口通信、调试*。
- ✅串口帧速率获取，用于*开发者更多高级操作*。
- ✅串口快捷命令，用于*AT固件相关的高级操作，可以在快捷命令里收集最常用的命令后保存*。
- ✅云数据设置，可以设置国内镜像源：*福州电信(√)、福州联通(√)、湖北十堰三网、腾讯云轻量、阿里云轻量*，和国际镜像源：*Github(√)、JsDelivr、Netlify(√)*。

## 鸣谢列表、赞助列表

### 鸣谢 南京小熊派智能科技有限公司 允许我们参与小熊派固件中心内测与体验EBM_H63开发板

> 小熊派官网[点我前往](https://bearpi.cn/)

### 鸣谢 江苏润和软件股份有限公司 提供技术支持与体验新品开发板+适配AT命令集合

> 润和官网[点我前往](https://www.hoperun.com/)

### 鸣谢 所有赞助的用户、开发者们

> 见软件的支持我们页面。

## 支持的开发板：

> HiHope_NearLink_DK3863E_V03
> 润和WS63开发板，可以适用Hi3863固件。

> Hihope_HH-D03
> 润和BS21开发板，可以适用Hi2821固件。

> BearPi_Pico_H3863
> 小熊派Hi3863开发板，可以适用Hi3863固件。

> BearPi_Pico_H2821
> 小熊派Hi2821开发板，可以适用Hi2821固件。

> BearPi_EBM_H63
> 小熊派Hi3863邮票孔开发板，可以适用EBM_H63小熊派加密固件。

> Haohanyh_Hi2821_Dev_Board
> 浩瀚银河Hi2821核心板，可以适用Hi2821固件。

> Haohanyh_Hi3863_NearLink_Gateway_Board
> 浩瀚银河Hi3863网关产品，可以适用Hi3863固件。

期待更多开发板能够添加进来OvO，我们允许个人创作产品以厂商名称支持您哦。

## 目录介绍

| 目录 | 介绍 |
| ----------------- | ------------------------------------------------------------      |
| firmwares         | 存放readme.md固件介绍、metadata元数据、fwpkg格式固件文件             |
| serial_shortcuts  | 存放串口多发的常用命令集合json元数据                                 |
| tools             | 存放工具                                                           |

# 参与贡献一：提交固件

- 在windows/linux下安装git，并配置git账号、密码、邮箱等
> git config --global user.name "Your Name" // 配置用户名

> git config --global user.email "your.email@example.com" // 配置邮箱

> git config –list // 查看配置信息

- fork仓库，并clone到本地，并切换到main分支
> git clone https://github.com/yourname/nearlink-firmwares.git

> cd nearlink-firmwares

> git checkout main

- 添加远程仓库
> git remote add upstream https://github.com/yourname/nearlink-firmwares.git

- 拉取远程仓库最新代码
> git pull upstream main

- 在本地案例提交前，如果您是**开发者**，则需要您在firmwares文件夹下，创建自己的固件目录，目录命名虽然没有规则但烦请您*尽量使用英文命名、尽量不要留有BearPi, Hihope等星闪开发板厂商字样，尽量简短*。

创建目录后，您可以在您的文件夹下存放`.fwpkg`的星闪固件格式文件，`.pdf`的相关固件使用说明文件，`readme.md`的固件对应的项目介绍内容，`metadata.json`的元数据文件内容。其余格式文件的一切提交将会驳回。

Tips：**请注意，您提交的一切内容，都应当遵守中国大陆相关法律法规，一切说明文件和介绍内容、元数据内容里，切勿存在违法内容。星闪固件请勿制作损坏他人物品以目的、制作有损现实场景的通信扰乱等内容。**

- 案例提交前，请您在**您的文件夹下**的`metadata.json`文件，添加对应的字段，字段描述及举例如下：

```json
{
    "online": true,                                                         //是否上线，true为上线，false为下线 
    "imageUrl": "https://s2.loli.net/2024/11/10/y9GvWc3wh8NpgrO.jpg",       //主页显示的固件项目介绍图片，如果您有做的话您可以添加您的项目介绍图片
    "packageName": "星闪聊天固件",                                           //主页显示的固件项目名称
    "description": "为Android、Web多场景下提供星闪通信能力与聊天功能。",        //主页显示的固件项目简短介绍，建议控制字数，因为我们允许您提交readme.md文件补充说明。
    "author": "Lin.Meng",                                                   //作者名称，请符合法律法规
    "authorAvatar": "https://avatars.githubusercontent.com/u/51528915?v=4", //作者头像，您可以选用Github Avatar
    "needCode": false,                                                      //是否需要邀请码？是否需要内购？
    "categories": [
        "通信功能"                                                          //该分类我们目前只允许填写：通信功能、移动终端、国产替代、物联网、智能家居、娱乐功能、测距尝鲜、实体产品。
                                                                            //该分类我们目前只允许写一例，请核对清楚后再选择。
    ],
    "chips": [
        "Hi2821",                                                           //该分类我们目前只允许填写：Hi2821 Hi2825 Hi3863 Hi3873
        "Hi3863"                                                            //如果您已经测试过其他星闪芯片使用官方海思、第三方ws63flash烧写文件没问题情况下，联系我。
    ],
    "brands": [
        "润和",                                                             //该分类我们目前只允许填写：润和、小熊派、浩瀚银河、华为海思、利尔达、安信可
        "小熊派",                                                           //如果您已经有其他厂商名称想填写的情况下，联系我。
        "浩瀚银河"                                                          //如果您是厂商，或者您为个人创作者，可以留下您的（厂商/个人）名字作为厂商分类，同时联系我说明原因。
    ],
    "files": [
        {
            "name": "Hi2821服务端固件",                                     //需要添加下载的文件，按格式填写，芯片型号+有无区分客户端服务端+名称+固件
            "filename": "bs21_all_in_one_server.fwpkg"                     //fwpkg文件格式之所以需要对应，软件内有一键烧写功能，会匹配.fwpkg文件。
        },
        {
            "name": "Hi2821客户端固件",
            "filename": "bs21_all_in_one_client.fwpkg"
        },
        {
            "name": "Hi3863服务端固件",
            "filename": "ws63-liteos-app_all_server.fwpkg"
        },
        {
            "name": "Hi3863客户端固件",
            "filename": "ws63-liteos-app_all_client.fwpkg"
        }
    ]
}
```
然后慢慢填充您的文件，请注意检查。

- 案例提交到自己fork的仓库后，创建Pull requests，创建在**Github**上。并填写对应内容，内容格式如下：
```markdown
# 标题(仅允许以下内容)
> feat: Create XXXX New Firmware
# 内容(自己写,不写我就会检查您的Readme是否存在, 否则会驳回您的提交)
> 可以用中文，也可以用英文，只需要您有写。您不写的情况下我们会检查您是否提交了readme.md文件。

# Reviewers审核人
> 请@Hny0305Lin，您不选择的情况下我们会驳回您的提交。
```

如果您不会这一步，请您参考我们的HelloWorld提交，地址[点我打开](https://github.com/MiraHikari/nearlink-firmwares/pull/1)

- 最后一步，创建Issue，创建在**Github**上。并填写对应内容，内容格式如下：
```markdown
# 标题(上面怎么写，这里去掉feat:后就可以了，直接相当于复制粘贴去掉feat)
> Create XXXX New Firmware
# 内容(写下面的)
> 该issue将捆绑项目，提交固件内容信息。

# Assignees受让人
> 可以@Hny0305Lin，也可以不用
# 提交好Developments
记得选自己fork的项目分支
```

如果您不会这一步，请您参考我们的HelloWorld Issue提交，地址[点我打开](https://github.com/MiraHikari/nearlink-firmwares/issues/2)

- 最后，等待审核，审核通过后，您就可以在星闪固件管理内的，固件云市场页面，能看到您的固件了。

# 参与贡献二：分享您在串口时常用的命令或快捷内容，并在软件包装成元数据json文件

还是按照第一步，配置Git、创建文件夹存放clone下来的项目所有文件，在案例提交前，还烦请希望**您是一位专业的开发者，您在制作串口常用命令或快捷内容时，应当考虑更多用户的实际需求。**

当您一切准备就绪后**也请您，使用我们的星闪固件管理软件，来作为您图形化编辑元数据的工具。手动编辑元数据是最累最不讨好的一件事，我们希望使用者能大幅度减少编码时间。**

请您在软件内制作好快捷命令，并对分类内容只做以下分类：*基础命令(basic)、串口配置(serial)、星闪设置(nearlink)、系统相关(system)、调试命令(debug)、网络测试(network)、其他命令(other)*

如下是默认案例，可以视为对您的元数据的内容参考：

```json
{
  "name": "XX命令集",                                    //名称
  "description": "基础的 XX 命令集合",                   //请您在描述信息里，描述对该命令集的简单介绍、适用于哪些固件(如为您个人作品您可直接描述即可)等等内容。
  "categories": [
    {
      "id": "basic",                                    //基础命令请您存储，AT固件里最常使用到的。
      "name": "基础命令"                                //我们推荐类似于AT+HELP这样的命令，来作为基础命令。
    },
    {
      "id": "serial",                                   //串口配置请您存储，能对星闪设备串口修改、串口配置、串口管理的使用到的。
      "name": "串口配置"                                //我们推荐类似于AT+SETUARTCFG这样的命令，来作为串口配置。
    },
    {
      "id": "nearlink",                                 //星闪设置请您存储，能对星闪设备进行网络配置、MAC配置，以及能控制星闪网络相关的使用到的。
      "name": "星闪设置"                                //我们推荐类似于AT+SETSLEADDR这样的命令，来作为星闪设置。
    },
    {
      "id": "system",                                   //系统相关请您存储，能对星闪设备进行控制、管理、底层逻辑的修改等相关使用到的。
      "name": "系统相关"                                //我们推荐类似于AT+RESTORESET这样的命令，来作为系统相关。
    },
    {
      "id": "debug",                                    //调试命令请您存储，能对星闪设备UART串口相关的调试查询、调试功能、调试联动等相关使用到的。
      "name": "调试命令"                                //我们推荐类似于AT+SETUARTCFG?这样带"?"的相关命令或其他命令，来作为调试命令。
    },
    {
      "id": "network",                                  //网络调试请您存储，能对星闪设备SLE通讯时的常用内容、常用命令等相关使用到的。
      "name": "网络调试"                                //我们推荐类似于AT+CSLIST、AT+SCLIST这样获取星闪设备SLE通讯获取设备列表的命令或相关或其他命令，来作为网络调试。
    },
    {
      "id": "other",                                    //其他命令请您存储，AT固件里目前您认为暂时无法区分分类的、有其他用途的、未来功能的、能用得到的等等的。
      "name": "其他命令"                                //其他命令请您自行斟酌，但请您不要滥用这一内容来作为您填写大量不良内容、不友好的内容的地方。
    }
  ],
  "commands": [
    {
      "name": "AT 测试",                                //name为分类名字
      "command": "AT",                                  //command为串口快捷命令时，快捷输入进软件输入框里的内容
      "shortcut": "1",                                  //shortcut为串口快捷命令，在软件内的快捷键形式，当为“1”时所代表：Ctrl + 1。
                                                        //同理，如果设置为Z所代表：Ctrl + Z，当然这是系统内的恢复快捷键。我们不希望系统常用快捷键来设置为这里的快捷键，这是对他人不道德的行为。
      "category": "basic",                              //category为串口快捷命令，对应元数据里的集合分类，注意要对应清楚。
      "order": 0                                        //order为串口页面UI里，快捷命令排放的列数，0为最前面，数字越大排放越后。
    },
    {
      ......                                            //还能创建N个快捷命令，详情请见我们提交的serial_shortcuts文件夹下。
    }
  ],
  "exportTime": "2024-11-22T18:51:41.902Z",             //时间戳
  "author": "Hny0305Lin",                               //作者，我们会通过作者名来获取作者的GitHub avatar，请有意提交的作者填写好您在Github的名字
  "version": "1.0.0"                                    //版本号
}
```

或者您也可以利用这项功能，来作为您未来的某款硬件时*常使用到的串口命令*，通过该仓库分发给每一位使用者。这些都是允许的。**我们会对每一位参与该贡献的使用者，表示感谢。**

最后一步之前，还烦请您**在简介上，留下这份命令集，可以适用于哪些固件。请您留好名称，方便更多的使用者，使用时能正常对应。当然，如果这是对应您的产品，您只需要留下完整的产品名称即可。**

- 案例提交到自己fork的仓库后，创建Pull requests，创建在**Github**上。并填写对应内容，内容格式如下：
```markdown
# 标题(仅允许以下内容)
> feat: Create XXXX New Serial Shortcuts
# 内容(自己写, 否则会驳回您的提交)
> 可以用中文，也可以用英文，只需要您有写。您不写的情况下我们会检查您是否提交完整的、合规的json元数据文件。

# Reviewers审核人
> 请@Hny0305Lin，您不选择的情况下我们会驳回您的提交。
```

- 最后一步，创建Issue，创建在**Github**上。并填写对应内容，内容格式如下：
```markdown
# 标题(上面怎么写，这里去掉feat:后就可以了，直接相当于复制粘贴去掉feat)
> Create XXXX New Serial Shortcuts
# 内容(写下面的)
> 该issue将捆绑项目，提交元数据内容信息。

# Assignees受让人
> 可以@Hny0305Lin，也可以不用
# 提交好Developments
记得选自己fork的项目分支
```

# 参与贡献三：提交问题

如果您在使用我们软件过程中，遇到任何问题，都可以提交Issue，格式如下：

```markdown
# 标题(仅允许以下内容)
> Report Bug:出现了XX问题导致了XX问题。
# 内容(不怕你字多，怕你写不全、写不明确，请百度Google，了解一下提问の艺术)
> 如上。
> 冷知识：软件有问题，我们是最着急的，您的反馈我们都会看，长时间不回复您的Issue或许是我们在修复的路上呢。烦请等待回复，使用期间如果您还发生其他问题，可以在提交Issue下继续提交。

# Assignees受让人
> 可以@Hny0305Lin，也可以不用
```

或者您可以发送邮件至[MiraHikari的邮箱](mailto:mirahikari@gcxstudio.cn) 和 [Lin.Meng的邮箱](lmj-mc@outlook.com)，跟上面一样。

# 参与贡献四：举报固件

如果您发现固件内含有违法违规内容，请提交Issue，格式如下：

```markdown
# 标题(仅允许以下内容)
> Report Firmware:举报XX固件。
# 内容(请详细描述，我们会在24小时内审核并处理)
> 如上。

# Assignees受让人
> 可以@Hny0305Lin，也可以不用
```

或者您可以发送邮件至[MiraHikari的邮箱](mailto:mirahikari@gcxstudio.cn) 和 [Lin.Meng的邮箱](lmj-mc@outlook.com)，跟上面一样。

# 参与贡献五：捐赠

本软件所有功能**都将保持免费，不额外收费，拒绝任何付费下载行为，拒绝任何倒卖软件行为，拒绝软件内嵌广告等商业行为**。

以上这些，已经将我们软件大量商业化行为，直接“狠狠的 out 掉”了。

我们希望，允许的话，请您有一定的经济能力后参与该贡献，我们对任何“0.01元及以上的赞助行为”都将通过您的允许，留存在我们的`sponsor-list.json`数据里，留存在该软件的历史长河里。

我们推荐Wechat Pay(法币支付)、USDT ERC20(加密货币)、USDT TRC20(加密货币)来赞赏捐赠。**所有可靠有效的捐赠行为，我们都将视为您有一定经济基础下的，公益赞赏行为，我们不接受任何未成年人开发者和用户的捐赠行为。赞赏行为一经发生不可撤回，希望您能理解我们项目团队，所以未成年人开发者和使用者请不要赞赏！避免给我们项目团队增加负担。**

如您需要附言在软件UI上，请您发送邮件至[MiraHikari的邮箱](mailto:mirahikari@gcxstudio.cn) 或 [Lin.Meng的邮箱](lmj-mc@outlook.com)，进行附言留言，并贴上您的交易截图和相关流水号来让我们证明。

# 参与贡献六（未来）：在中国大陆地域，留下您的同步镜像仓链接

**赠人玫瑰，手留余香**，本项目由于目前对公开的所有数据，配备了福州电信+福州联通+十堰机房(未来)+Netlify等等的实体镜像机房。

该项目将会持续开发的同时，也希望能够，实现照顾中国大陆地区近一半省份，因**无法正常与Github通讯而使用软件上造成的网络延迟的割裂感**，在此我们希望得到更多开发者的支持。

我们决定开设这份参与贡献，该贡献将会在2025 Q1启动，并希望做到：**中国大陆近一半的省份的绝大多数开发者，能够在用网高峰期期间，使用软件获取元数据的UI显示时间，不超过500ms**。

我们希望，500ms是一个软件使用上的“分水岭”，500ms以下将视为**您能够正常获取得到我们软件大量的元数据文件、固件文件、PDF文件等等**，500ms以上将视为**您的网络访问不顺畅，并且加载缓慢**等异常行为等等。

我们对这些付出行动的镜像站维护者，表示真诚的感谢，谢谢您们。Thanks!

同时，我们呼吁参与该贡献的每一位开发者：

- 请在您有一定的经济能力、足够的网络运维配置能力下进行。
- 请您对公开的镜像源，保证5分钟同步Github镜像仓库，我们推荐您使用代理仓库来作为您的同步中**可以补救的措施**。
- 请您能够保证该服务器、服务器连接的网络，7x24小时内只间断**不超过12小时**。（根据可用性SLA数学模型：可用性 = (1 - 总允许停机时间 / 总时间) × 100%，该方程式来计算后您服务器和带宽的SLA可靠性，应当不低于92.87%。我们很乐意您使用更高级的云服务商来作为贡献，中国大陆高级的云服务商对SLA的公开可用性指数已接近99.98%，比我们要求的数据高很多，网络服务也会更加可靠）
- 请您能够保证，您配置的镜像站里，**不会有大量文件恶意修改、虚假同步、证书劫持、访问探针、违法违规内容分享等行为**，我们会在一定时间里对每一个镜像站进行所谓的“检查行动”，当我们发现问题时，会及时取消您镜像站，并对违法行为公开和举报。我们保留对互联网违法犯罪行为的最终解释权，我们乐意保护使用我们软件的每一位开发者和用户。

最后，我们呼吁每一位使用第三方镜像源的用户：

- 请不要伤害每一位“做种”的镜像站维护者。他们**付出了时间精力，做出了甚至可能0回报的事情**，他们充满了爱心和正能量来参与贡献。**请不要滥用流量、DDOS攻击、破坏网络等违法违规行为**。
- 如果您能在互联网的某一处角落里，遇到了这些第三方镜像源的维护者，请对他/她们，说一句这样类似的话：“谢谢 / 您很厉害 / 您美极了”，等表达赞赏的词句来表示感谢。如果第三方镜像源维护者为国际友人，还烦请您多多使用翻译软件，用“对方的母语”来表示感谢。**但请不要过度骚扰他们!**
- 第三方镜像源，本质上仅为“解决燃眉之急”。**本项目维护者多数仍愿意为GitHub为提交中心**，请您在合法范围内掌握一定程度的科学上网技能，保证您能够在用网期间，可以正常使用Github，或者您可以使用我们浩瀚银河福州镜像源，来作为您的正常首选。**浩瀚银河福州镜像源，作为Gitub 2分钟同步镜像源，合法合规，对Github内容100%同步，接受文件校验检查，接受大家监督**。

您可以将您的镜像仓地址，发送邮件至[MiraHikari的邮箱](mailto:mirahikari@gcxstudio.cn) 和 [Lin.Meng的邮箱](lmj-mc@outlook.com)。我们将会与您联系。